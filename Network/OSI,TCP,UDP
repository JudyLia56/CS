# OSI 7계층 / TCP와 UDP

- OSI 7계층 이란?
    
    네트워크에서 통신이 일어나는 과정은 7단계로 구분 해 놓은 것.
    
    클라이언트로부터 서버로는 7계층부터 1계층
    
    서버에서 클라이언트는 1계층부터 7계층
    
    ![Untitled](OSI%207%E1%84%80%E1%85%A8%E1%84%8E%E1%85%B3%E1%86%BC%20TCP%E1%84%8B%E1%85%AA%20UDP%2041df87e0ebb94703a9cef8ba32443570/Untitled.png)
    

- Layer 1: 물리 계층
    - 최하위 계층으로 디지털로 된 데이터를 아날로그 전기신호로 변환해 물리적으로 전송이 가능하게 함
    - 단순히 데이터를 전달하는 계층이므로 오류제어나 알고리즘 같은 기능들은 없음
    - 0과 1의 비트열로 이루어진 데이터
    - 주소 개념이 없고 물리적으로 연결된 노드 사이에서 신호를 주고 받음
    - 주요 장비: 허브, 리피터, 네트워크 카드
- Layer 2: 데이터링크 계층
    - 물리 계층을 바탕으로 인접한 노드간의 신뢰성 있는 데이터를 전송을 제어 (Nod-To-Nod Delivery)
    - 신뢰성 있는 데이터 전송을 위해 흐름 제어, 오류 제어, 회선 제어 수행
    - MAC(Media Access Control)을 사용해 목적지를 찾아감
        - MAC은 네트워크 상의 컴퓨터에 고유 식별자, 엑세스 제어를 제공, IP 네트워크에 고유한 번호 할당
    - 프레임 (데이터 단위)
        - 상위 계층에서 받은 데이터의 오류 확인을 위한 체크섬, 송수신 호스트의 주소, 제어코드 가 포함, 데이터를 담는 컨테이너로 동일 네트워크 상에서의 정보만 가짐.
    - 주요 장비: 브리지, 스위치
- Layer 3: 네트워크 계층
    - 라우팅: 데이터를 목적지까지 가장 빠르고 안전하게 전달하는 기능
    - 라우팅 알고리즘을 통해 선택, 제어함 (End-To-End or Host-To-Host Delivery)
    - 전송 주소로 IP 주소 사용
        - MAC 주소는 컴퓨터의 물리적인 주소, IP는 네트워크 주소, IP주소를 MAC주소로 바꿔서 사용하기 때문에 실질적으로 IP주소의 사용은 MAC주소 사용과 동일
        - 네트워크에서 목표 주소를 찾기 위해 사이의 노드들을 지나며 데이터 전달
    - 데이터 단위: 패킷(packet)
        - 컴퓨터 네트워크가 전달하는 데이터의 형식화된 블록 (=payload)
        - IP 패킷 : 헤더 + 페이로드
        - 프레임을 다른 네트워크로 전달하기 위한 포장
    - 주요 장비: 라우터, L3 스위치(2계층의 스위치에 라우팅을 장착)
- Layer 4: 전송 계층
    - 종단 간의 신뢰성 있는 데이터 전송 (End-To-End Reliable Delivery)
    - 프로세스까지 데이터가 도달할 수 있게 함, 프로세스를 특정하기 위한 Port Number사용
    - 데이터를 하나로 통합해 5계층으로 전달
    - TCP와 UDP가 존재
    - 분할과 재조합, 연결 제어, 흐름 제어, 오류 제어, 혼잡 제어
    - 데이터 단위: 세그먼트
        - 실질적인 전송을 위해 적절하게 분할한 조각
        - 발신자 포트, 목적지 포트, 순서를 붙여 오류 검출 코드와 함께 그룹화
        - 세그먼트의 오류 검출 코드와 목적지의 오류 검출 코드가 다르다면 오류가 발생 → 세그먼트를 폐기하고 복구 절차 시작(오류 절차코드 = 체크섬)
    - 주요 장비: L4 스위치
- Layer 5: 세션 계층
    - 응용 프로그램 간의 세션 생성, 제어
    - 통신 장치 간의 상호작용 및 동기화 제공
    - 통신 방법
        - Full-Duplex: 데이터의 송신과 수신이 동시에 이루어짐, 디바이스들 간의 통신선이 두개
            - ex)  전화 통화, 웹소켓 통신
        - Half-Duplex: 디바이스들 간의 통신선이 하나, 송신과 수신이 모두 가능하지만 동시에는 불가
            - ex) 무전기, HTTP
        - Simple: 디바이스들 간의 통신선이 하나, 한 쪽으로만 전송이 가능
    - TCP/IP 세션을 생성, 유지, 삭제의 책임
    - 데이터의 단위: 데이터 or 메시지
- Layer 6: 표현 계층
    - 데이터를 어떻게 표현할 것인지 정하는 역할
    - 인코딩/디코딩, 압축/해제, 암호화/복호화 의 역할
    - 데이터 단위: 데이터
- Layer 7: 응용 계층
    - 최종 목적지 ex) HTTP, FTP, Telnet
    - 사용자와 가장 가까운 계층
    - 응용 프로세스 간의 정보 교환 담당

- TCP (Transmission Control Protocol)
    - 전송을 제어하는 프로토콜
    - 인터넷 상에서 데이터를 메시지 형태로 보내기 위해 IP와 함께 사용하는 프로토콜
    - IP는 데이터의 배달, TCP는 패킷을 추적 및 관리
    - 특징
        - 연결형 서비스로 가상 회선 방식을 제공
        - 3-way handshaking(목적지와 수신지를 확실히 하여 정확한 전송을 보장하기 위해 세션을 수립하는 과정)을 통해 연결 설정, 4-way handshaking을 통해 해제
        - 흐름 제어, 혼잡 제어
        - 높은 신뢰성 보장
        - UDP보다는 속도 느림
        - Full-Duplex, Point to Point 방식
        
        ⇒ 연속성보다는 신뢰성이 있는 전송에 사용
        
    - TCP 서버의 특징
        - 서버소켓은 연결만 담당
        - 연결과정에서 반환된 클라이언트 소켓은 데이터의 송수신에 사용
        - 서버와 클라이언트 1대 1 연결
        - 데이터의 크기 무제한 (스트림 전송)
        - 패킷에 응답을 하기 때문에 성능이 낮음
        - 스트리밍에 불리
    
    ![Untitled](OSI%207%E1%84%80%E1%85%A8%E1%84%8E%E1%85%B3%E1%86%BC%20TCP%E1%84%8B%E1%85%AA%20UDP%2041df87e0ebb94703a9cef8ba32443570/Untitled%201.png)
    
- UDP(User Datagram Protocol)
    - 사용자 데이터 프로토콜
    - 데이터를 데이터그램 단위로 처리하는 프로토콜
    - 각각의 패킷은 다른 경로로 전송되고 독립적인 관계
    - 특징
        - 비연결형 서비스로 데이터그램 방식 제공
        - 정보의 송수신에 신호절차를 거치지 않음
        - UDP헤더의 체크섬필드를 통해 최소한의 오류 검출
        - 신뢰성이 낮음
        - TCP보다 빠름
        
        ⇒ 신뢰성보다는 연속성이 중요한 서비스
        
    - UDP 서버 특징
        - 연결이 없어 서버소켓과 클라이언트 소켓 구분 없음
        - IP기반으로 데이터 전송
        - 서버와 클라이언트는 1대 1, 1 대N, N 대 M 등등 다양하게 연결 가능
        - 데이터그램(메시지) 단위로 전송, 크기 제한이 있음
        - 흐름제어가 없어 오류가 없는지, 패킷 전송이 잘 됐는지 확인 불가
    
    ![Untitled](OSI%207%E1%84%80%E1%85%A8%E1%84%8E%E1%85%B3%E1%86%BC%20TCP%E1%84%8B%E1%85%AA%20UDP%2041df87e0ebb94703a9cef8ba32443570/Untitled%202.png)
    
- cf) TCP와 UDP의 비교
    
    ![Untitled](OSI%207%E1%84%80%E1%85%A8%E1%84%8E%E1%85%B3%E1%86%BC%20TCP%E1%84%8B%E1%85%AA%20UDP%2041df87e0ebb94703a9cef8ba32443570/Untitled%203.png)
